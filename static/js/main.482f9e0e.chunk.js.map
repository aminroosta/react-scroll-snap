{"version":3,"sources":["../../src/index.tsx","App.tsx","index.tsx"],"names":["useRef","React","useEffect","Page","children","className","style","ref","styles","SnapY","root","refs","props_arr","pages_snapped","pages_skipped","child","props","clone","animations","callback","scroll","console","scrollTop","scrollHeight","offsetHeight","a","on_scroll","passive","r","frames","animation","iterations","fill","duration","offset","background","paddingTop","App","skip_snap","position","height","top","left","transform","ReactDOM","render","document","getElementById"],"mappings":"wSAIQA,EAAgCC,SAAdC,EAAcD,YAW3BE,EAAa,sBACxB,kBAAGC,EAAH,yBAAaC,OAAb,qBAA6BC,OAA7B,kBACE,+BAEEC,IAAKA,EACLD,MAAOA,EACPD,UAAcA,EAAL,IAAkBG,GAL/B,MAkBWC,EAAe,SAAC,G,IAAEL,aAEzBM,EAAOV,EAAX,MACIW,EAAJ,GACIC,EAAJ,GAEMC,EAAN,GACMC,EAAN,GAwDA,OAtDAb,sBAAiC,SAAAc,GAE/B,IAAMR,EAAMP,EAAZ,MACAW,UAEA,IAAMK,EAAQD,GAASA,EAATA,OAAd,GACAH,UAGA,IAAMK,EAAQ,yBAA0B,CAAEV,QAEzCS,EAAD,UAAoBF,OAApB,GAAgDD,OAAhD,MAmBFX,GAAU,WACR,IAAMgB,EAAN,GACMC,EAAW,kBAjBnB,YACE,IAAMC,EAASV,qBAA0BA,uBAA4BA,UAArE,cAEAW,YAAY,CACVC,UAAWZ,UADD,UAEVa,aAAcb,UAFJ,aAGVc,aAAcd,UAAac,eAG7BN,WAAmB,SAAAO,GACjBA,kBAAgBL,KAElBC,eAKuBK,CAAN,IAmBjB,OAlBAhB,sCAAkD,CAAEiB,SAAS,IAE7DhB,WAAa,cACOC,KAAlB,YAGEgB,yCAGF,IAAMC,EAASjB,aAAf,GACAS,eACA,IAAIS,EAAYF,EAAA,kBACN,CAAEG,WAAF,EAAiBC,KAAjB,OAA+BC,SAAU,MAEnDH,UACAZ,aAGK,kBAAMR,uCAAN,MArBTR,IAwBO,+BAAKG,UAAWG,GACrB,+BAAKD,IAAKG,EAAML,UAAWG,GADtB,GAAP,IC5FEqB,G,MAAS,CACX,CACE,CAAEK,OAAQ,EAAOC,WAAY,aAC7B,CAAED,OAAQ,EAAI,EAAGC,WAAY,SAE/B,CACE,CAAED,OAAQ,EAAOC,WAAY,aAC7B,CAAED,OAAQ,EAAI,EAAGC,WAAY,QAC7B,CAAED,OAAQ,EAAI,EAAGC,WAAY,WAE/B,CACE,CAAED,OAAQ,EAAI,EAAGC,WAAY,QAC7B,CAAED,OAAQ,EAAI,EAAGC,WAAY,UAC7B,CAAED,OAAQ,EAAOC,WAAY,YAE/B,CACE,CAAED,OAAQ,EAAI,EAAGC,WAAY,UAC7B,CAAED,OAAQ,EAAOC,WAAY,cAI3B7B,EAAQ,CAAE8B,WAAY,OA0BbC,EAvBH,WACV,OAAO,kBAAC,EAAD,KACL,kBAAClC,EAAD,CAAMG,MAAOA,EAAOuB,OAAQA,EAAO,IAAnC,UACA,kBAAC1B,EAAD,CAAMG,MAAOA,EAAOuB,OAAQA,EAAO,IAAnC,UACA,kBAAC1B,EAAD,CAAMG,MAAOA,EAAOuB,OAAQA,EAAO,IAAnC,UACA,kBAAC1B,EAAD,CAAMG,MAAOA,EAAOuB,OAAQA,EAAO,IAAnC,UAEA,kBAAC1B,EAAD,CAAMmC,WAAS,EACbhC,MAAO,CACLiC,SAAU,WACVJ,WAAY,OACZK,OAAQ,OACRC,IAAK,EACLC,KAAM,GAERb,OAAQ,CACN,CAAEK,OAAQ,EAAGS,UAAW,oBACxB,CAAET,OAAQ,EAAGS,UAAW,sBCxChCC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.482f9e0e.chunk.js","sourcesContent":["import * as React from 'react'\nimport styles from './styles.module.css'\n\n// @ts-ignore\nconst { useRef, useState, useEffect } = React;\n\ntype Page = React.FC<{\n  frames?: Keyframe[],\n  skip_snap?: boolean,\n  children?: React.ReactNode | undefined,\n  style?: React.CSSProperties,\n  className?: string\n}>;\n\n// @ts-ignore\nexport const Page: Page = React.forwardRef(\n  ({ children, className = '', style = {} }, ref) => (\n    <div\n      // @ts-ignore\n      ref={ref}\n      style={style}\n      className={`${className} ${styles.page}`}\n    >{children}</div>\n  )\n);\n\ntype SnapY = React.FC<{\n  children?: React.ReactElement<{\n    frames?: Keyframe[],\n    children: React.ReactNode,\n    style?: React.CSSProperties,\n    className?: string\n  }>[],\n}>;\nexport const SnapY: SnapY = ({ children }) => {\n  // @ts-ignore\n  let root = useRef(null as HTMLDivElement);\n  let refs = [] as React.MutableRefObject<HTMLElement>[];\n  let props_arr = [] as any[];\n\n  const pages_snapped = [] as any[];\n  const pages_skipped = [] as any[];\n\n  React.Children.forEach(children, child => {\n    // @ts-ignore\n    const ref = useRef(null as HTMLElement);\n    refs.push(ref);\n\n    const props = child && child.props || {} as any;\n    props_arr.push(props);\n\n    // @ts-ignore\n    const clone = React.cloneElement(child, { ref });\n\n    (props.skip_snap) ? pages_skipped.push(clone) : pages_snapped.push(clone);\n  });\n\n\n  function on_scroll(animations: Animation[]) {\n    const scroll = root.current.scrollTop / (root.current.scrollHeight - root.current.clientHeight);\n\n    console.log({\n      scrollTop: root.current.scrollTop,\n      scrollHeight: root.current.scrollHeight,\n      offsetHeight: root.current.offsetHeight\n    })\n\n    animations.forEach(a => {\n      a.currentTime = scroll * 10000;\n    });\n    console.log(scroll)\n  };\n\n  useEffect(() => {\n    const animations = [] as Animation[]\n    const callback = () => on_scroll(animations);\n    root.current.addEventListener('scroll', callback, { passive: true });\n\n    refs.forEach((r, idx) => {\n      const skip_snap = props_arr[idx].skip_snap;\n      if (!skip_snap) {\n        // @ts-ignore\n        r.current.style.scrollSnapAlign = 'start';\n      }\n\n      const frames = props_arr[idx].frames || [];\n      console.log(frames);\n      let animation = r.current.animate(\n        frames, { iterations: 1, fill: 'both', duration: 10000 }\n      );\n      animation.pause();\n      animations.push(animation);\n    });\n\n    return () => root.current.removeEventListener('scroll', callback);\n  }, []);\n\n  return <div className={styles.wrapper}>\n    <div ref={root} className={styles.snap_y}>\n      {pages_snapped}\n    </div>\n    {pages_skipped}\n  </div>\n}\n","import React from 'react'\n\nimport { SnapY, Page } from 'react-scroll-snap'\nimport 'react-scroll-snap/dist/index.css'\n\nlet frames = [\n  [\n    { offset: 0 / 3, background: 'slateblue' },\n    { offset: 1 / 3, background: 'teal' },\n  ],\n  [\n    { offset: 0 / 3, background: 'slateblue' },\n    { offset: 1 / 3, background: 'teal' },\n    { offset: 2 / 3, background: 'tomato' },\n  ],\n  [\n    { offset: 1 / 3, background: 'teal' },\n    { offset: 2 / 3, background: 'tomato' },\n    { offset: 3 / 3, background: 'skyblue' },\n  ],\n  [\n    { offset: 2 / 3, background: 'tomato' },\n    { offset: 3 / 3, background: 'skyblue' },\n  ]\n];\n\nconst style = { paddingTop: '1em' };\n\n\nconst App = () => {\n  return <SnapY>\n    <Page style={style} frames={frames[0]}>page 1</Page>\n    <Page style={style} frames={frames[1]}>page 2</Page>\n    <Page style={style} frames={frames[2]}>page 3</Page>\n    <Page style={style} frames={frames[3]}>page 4</Page>\n\n    <Page skip_snap\n      style={{\n        position: \"absolute\",\n        background: 'blue',\n        height: '.5em',\n        top: 0,\n        left: 0,\n      }}\n      frames={[\n        { offset: 0, transform: 'translateX(-75%)'},\n        { offset: 1, transform: 'translateX(0)'}\n      ]}\n    />\n  </SnapY>\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}