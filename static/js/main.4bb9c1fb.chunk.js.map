{"version":3,"sources":["../../src/index.tsx","App.tsx","index.tsx"],"names":["useEffect","Page","className","style","ref","styles","Snap","dir","root","useRef","refs","props_arr","pages_snapped","pages_skipped","React","props","child","clone","key","idx","animations","callback","scroll","r","a","on_scroll","passive","frames","animation","iterations","fill","duration","offset","background","Example","page_style","padding","skip_snap","position","height","top","left","transform","App","width","margin","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4bb9c1fb.chunk.js","sourcesContent":["import * as React from 'react'\nimport styles from './styles.module.css'\n\n// @ts-ignore\nconst { useRef, useState, useEffect } = React;\n\ntype Page = React.FC<{\n  frames?: Keyframe[],\n  skip_snap?: boolean,\n  children?: React.ReactNode | undefined,\n  style?: React.CSSProperties,\n  className?: string\n}>;\n\n// @ts-ignore\nexport const Page: Page = React.forwardRef(\n  ({ children, className = '', style = {} }, ref) => (\n    <div\n      // @ts-ignore\n      ref={ref}\n      style={style}\n      className={`${className} ${styles.page}`}\n    >{children}</div>\n  )\n);\n\ntype Snap = React.FC<{\n  style?: React.CSSProperties,\n  dir: 'x' | 'y',\n  children?: React.ReactElement<{\n    frames?: Keyframe[],\n    children: React.ReactNode,\n    style?: React.CSSProperties,\n    className?: string\n  }>[],\n}>;\nexport const Snap: Snap = ({ children, style, dir}) => {\n  // @ts-ignore\n  dir = dir.toLowerCase();\n  // @ts-ignore\n  let root = useRef(null as HTMLDivElement);\n  let refs = [] as React.MutableRefObject<HTMLElement>[];\n  let props_arr = [] as any[];\n\n  const pages_snapped = [] as any[];\n  const pages_skipped = [] as any[];\n\n  React.Children.forEach(children, (child, idx) => {\n    // @ts-ignore\n    const ref = useRef(null as HTMLElement);\n    refs.push(ref);\n\n    const props = child && child.props || {} as any;\n    props_arr.push(props);\n\n    // @ts-ignore\n    const clone = React.cloneElement(child, { ref, key: idx });\n\n    (props.skip_snap) ? pages_skipped.push(clone) : pages_snapped.push(clone);\n  });\n\n\n  function on_scroll(animations: Animation[]) {\n    let scroll = 0;\n    let r = root.current;\n    if (dir === 'y') {\n      scroll = r.scrollTop / (r.scrollHeight - r.clientHeight);\n    } else if (dir === 'x') {\n      scroll = r.scrollLeft / (r.scrollWidth - r.clientWidth);\n    }\n\n    animations.forEach(a => {\n      a.currentTime = scroll * 10000;\n    });\n  };\n\n  useEffect(() => {\n    const animations = [] as Animation[]\n    const callback = () => on_scroll(animations);\n    root.current.addEventListener('scroll', callback, { passive: true });\n\n    refs.forEach((r, idx) => {\n      const skip_snap = props_arr[idx].skip_snap;\n      if (!skip_snap) {\n        // @ts-ignore\n        r.current.style.scrollSnapAlign = 'start';\n      }\n\n      const frames = props_arr[idx].frames || [];\n      let animation = r.current.animate(\n        frames, { iterations: 1, fill: 'both', duration: 10000 }\n      );\n      animation.pause();\n      animations.push(animation);\n    });\n\n    return () => root.current.removeEventListener('scroll', callback);\n  }, []);\n\n  const className = dir === 'x' ? styles.snap_x : styles.snap_y;\n  return <div style={style} className={styles.wrapper}>\n    <div ref={root} className={className}>\n      {pages_snapped}\n    </div>\n    {pages_skipped}\n  </div>\n}","import React, { CSSProperties } from 'react'\n\nimport { Snap, Page } from 'react-scroll-snap'\nimport 'react-scroll-snap/dist/index.css'\n\nlet frames = [\n  [\n    { offset: 0 / 3, background: 'slateblue' },\n    { offset: 1 / 3, background: 'teal' },\n  ],\n  [\n    { offset: 0 / 3, background: 'slateblue' },\n    { offset: 1 / 3, background: 'teal' },\n    { offset: 2 / 3, background: 'tomato' },\n  ],\n  [\n    { offset: 1 / 3, background: 'teal' },\n    { offset: 2 / 3, background: 'tomato' },\n    { offset: 3 / 3, background: 'skyblue' },\n  ],\n  [\n    { offset: 2 / 3, background: 'tomato' },\n    { offset: 3 / 3, background: 'skyblue' },\n  ]\n];\n\ntype Example = React.FC<{ dir: 'x' | 'y', style: CSSProperties }>;\nconst Example: Example = ({ dir, style }) => {\n  const page_style = { padding: '2em' };\n  return <Snap\n    dir={dir}\n    style={style}\n  >\n    <Page style={page_style} frames={frames[0]}>1- scroll in {dir} direction</Page>\n    <Page style={page_style} frames={frames[1]}>2- scroll in {dir} direction</Page>\n    <Page style={page_style} frames={frames[2]}>3- scroll in {dir} direction</Page>\n    <Page style={page_style} frames={frames[3]}>4- scroll in {dir} direction</Page>\n\n    <Page skip_snap\n      style={{\n        position: \"absolute\",\n        background: 'blue',\n        height: '.5em',\n        top: 0,\n        left: 0,\n      }}\n      frames={[\n        { offset: 0, transform: 'translateX(-75%)' },\n        { offset: 1, transform: 'translateX(0)' }\n      ]}\n    />\n  </Snap>\n}\n\nconst App = () => (\n  <>\n    <Example dir='x' style={{\n      width: '100%',\n      height: '25vh',\n      margin: 'auto',\n    }} />\n    <Example dir='y' style={{\n      width: '90%',\n      height: '70vh',\n      margin: '1em auto',\n    }}\n    />\n  </>\n);\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}